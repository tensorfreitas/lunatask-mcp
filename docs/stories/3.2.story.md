# Story 3.2: Finalize Documentation

## Status
Done

## Story
**As a** new user,
**I want** clear, comprehensive documentation in the `README.md` file,
**so that** I can quickly understand how to install, configure, and run the server.

## Acceptance Criteria
1. The `README.md` is updated with complete installation instructions using `uv` and `pip`.
2. Configuration instructions are provided, explaining all options for the config file and command-line arguments.
3. A "Getting Started" or "Usage" section is added, showing a clear example of how to run the server and call a tool.
4. All available MCP tools and resources are documented.

## Dev Notes

The following information is extracted from the architecture documents and provides all technical context needed to update the `README.md` accurately. Do not invent details; ensure all content aligns with the cited sources.

### Project & Technology Baseline
- Language target: Python 3.12 only. [Source: architecture/3-tech-stack.md#technology-stack-table]
- Package/venv management: `uv` used for dependency and environment management. [Source: architecture/3-tech-stack.md#technology-stack-table]
- Core frameworks/libraries: `fastmcp` (MCP server), `httpx` (async HTTP), `pydantic` (configuration/validation). [Source: architecture/3-tech-stack.md#technology-stack-table]
- Logging: stderr-only; never print bearer tokens or secrets. [Source: architecture/11-coding-standards.md#critical-rules-for-ai-agents]

### Source Tree & File Locations
- `README.md` lives at the repository root and is the primary user documentation. [Source: architecture/8-source-tree.md]
- Entry point script `lunatask-mcp` and Python module runner are part of the application runner (CoreServer). [Source: architecture/5-components.md#4-coreserver-application-runner]

### Server Capabilities To Document
- Transport: stdio; MCP protocol handling provided by FastMCP. [Source: architecture/2-high-level-architecture.md#technical-summary]
- Protocol version and capabilities are established in architecture; document supported protocol and stdio transport. [Source: architecture/2-high-level-architecture.md#protocol-versioning]
- Error handling and logging expectations for users (structured errors, stderr logs, redaction). [Source: architecture/10-error-handling-strategy.md#logging-standards]

### MCP Resources & Tools (must enumerate fully)
- Resources (read-only): `lunatask://tasks`, `lunatask://tasks/{task_id}` via TaskTools. [Source: architecture/5-components.md#2-tasktools-mcp-interface-component]
- Tools (write operations): `create_task`, `update_task`, `delete_task` via TaskTools. [Source: architecture/5-components.md#2-tasktools-mcp-interface-component]
- Habit tool: `track_habit` (POST /v1/habits/{id}/track`) via HabitTools. [Source: architecture/5-components.md#3-habittools-mcp-interface-component]

### External API Notes Users Should Know
- Base URL: `https://api.lunatask.app/v1/`; authenticated with `Authorization: Bearer <token>`. [Source: architecture/6-external-apis.md#lunatask-api]
- Habits tracking request body requires `performed_on` ISO-8601 date (`YYYY-MM-DD`). [Source: architecture/6-external-apis.md#lunatask-api]

### Configuration Guidance To Include
- Bearer token is required; token must never be logged. [Source: architecture/11-coding-standards.md#critical-rules-for-ai-agents]
- Configuration is validated on startup; fail-fast behavior with clear errors. [Source: architecture/10-error-handling-strategy.md#general-approach]

### Testing & TDD Expectations For Examples
- All examples should align with project testing strategy and async patterns. [Source: architecture/11-coding-standards.md#testing-strategy]
- Prefer `async` examples that use FastMCP client and stdio transport to call resources/tools. [Source: architecture/7-core-workflows.md]

### Security & Operational Notes
- Log to `stderr` only; keep stdout clean for MCP JSON-RPC. [Source: architecture/10-error-handling-strategy.md#logging-standards]
- Do not expose or echo bearer tokens in examples. [Source: architecture/11-coding-standards.md#critical-rules-for-ai-agents]

### Items Without Architecture-Specific Guidance
- `pip` installation specifics are not defined by architecture; include standard Python packaging instructions consistent with the repository’s installable layout. [Source: architecture/8-source-tree.md]

## Tasks / Subtasks

- [x] Task 1: Audit existing README coverage (AC: 1–4)
  - [x] Identify gaps in installation (both `uv` and `pip` flows) and configuration/usage sections. [Source: architecture/3-tech-stack.md#technology-stack-table]
  - [x] Verify all MCP resources/tools enumerations are up to date, including HabitTools. [Source: architecture/5-components.md#2-tasktools-mcp-interface-component]

- [x] Task 2: Add complete Installation section (AC: 1)
  - [x] `uv` path: show `uv sync`, `uv run lunatask-mcp`, and `uv run python -m lunatask_mcp.main`. [Source: architecture/3-tech-stack.md#technology-stack-table; architecture/5-components.md#4-coreserver-application-runner]

- [x] Task 3: Expand Configuration documentation (AC: 2)
  - [x] Document configuration methods and precedence (CLI → file → defaults) and fail-fast validation. [Source: architecture/10-error-handling-strategy.md#general-approach]
  - [x] Emphasize secret redaction and stderr-only logging. [Source: architecture/11-coding-standards.md#critical-rules-for-ai-agents]

- [x] Task 4: Add/verify Getting Started / Usage examples (AC: 3)
  - [x] Minimal example to start server and call `ping`/`create_task` using FastMCP client over stdio. [Source: architecture/7-core-workflows.md]
  - [x] Example calling a resource `lunatask://area/{area_id}/today` and a tool `create_task`. [Source: architecture/5-components.md#2-tasktools-mcp-interface-component]

- [x] Task 5: Document all MCP resources and tools (AC: 4)
  - [x] Resources: Discovery (`lunatask://tasks`, `/tasks/discovery`), single task (`lunatask://tasks/{task_id}`), area + global alias lists (`now`, `today`, `overdue`, `next-7-days`, `high-priority`, `recent-completions`).
  - [x] Tools: `create_task`, `update_task`, `delete_task`, `track_habit` with parameter tables and examples; include error handling notes. [Source: architecture/5-components.md#2-tasktools-mcp-interface-component; architecture/5-components.md#3-habittools-mcp-interface-component; architecture/10-error-handling-strategy.md#business-logic--mcp-tool-errors]

- [x] Task 6: Final review and polish (AC: 1–4)
  - [x] Ensure examples use Python 3.12 and `async`/`await` patterns where relevant. [Source: architecture/3-tech-stack.md#technology-stack-table]
  - [x] Verify no secrets are present in examples; redact tokens. [Source: architecture/11-coding-standards.md#critical-rules-for-ai-agents]

## Project Structure Alignment
- The README is located at the repo root per the Source Tree guide; updating it matches documented structure. [Source: architecture/8-source-tree.md]
- CLI and module entry points are documented under CoreServer; usage examples should reflect those entry points. [Source: architecture/5-components.md#4-coreserver-application-runner]

## Dev Agent Record
Date: 2025-09-06

Implemented Story 3.2 by updating the root README to meet all acceptance criteria using concise, user‑focused documentation:

- Installation: Added clear `uv` installation flow and a `pip` install path.
- Configuration: Documented precedence (CLI > file > defaults), expanded CLI examples (`--base-url`, `--token`, `--rate-limit-rpm`, `--rate-limit-burst`) and added all TOML options (`test_connectivity_on_startup`, rate limiting, HTTP tuning, timeouts). Emphasized stderr-only logging and secret redaction.
- Getting Started / Usage: Retained minimal run commands (CLI and `-m`), kept small FastMCP examples, and updated expected tool list. Replaced outdated "all tasks" example with area/global alias list examples.
- Tools & Resources: Added top-level overview and fully documented the `track_habit` tool (params `id`, `date`), alongside existing task tools. Documented resource discovery plus area/global alias lists and their semantics (today, overdue, next 7 days, now, high-priority, recent-completions).

All content cross-checked against architecture docs to avoid inventing details.

## QA Results
This section is populated by the QA agent after implementation.

## Change Log
| Date       | Version | Description                     | Author |
| ---------- | ------- | ------------------------------- | ------ |
| 2025-09-06 | 1.0     | Initial draft of Story 3.2      | Bob (Scrum Master) |
| 2025-09-06 | 1.1     | README aligned with code: discovery + area/global list aliases; tests added | James (Dev Agent) |
